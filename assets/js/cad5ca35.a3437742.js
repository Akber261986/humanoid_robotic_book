"use strict";(globalThis.webpackChunkhumanoid_robotic_book=globalThis.webpackChunkhumanoid_robotic_book||[]).push([[54],{2152:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>u,frontMatter:()=>t,metadata:()=>l,toc:()=>c});var o=i(4848),s=i(8453);const t={},r="ROS 2 + Gazebo Setup Example",l={id:"module2/examples/ros2_gazebo_setup",title:"ROS 2 + Gazebo Setup Example",description:"Overview",source:"@site/docs/module2/examples/ros2_gazebo_setup.md",sourceDirName:"module2/examples",slug:"/module2/examples/ros2_gazebo_setup",permalink:"/humanoid_robotic_book/docs/module2/examples/ros2_gazebo_setup",draft:!1,unlisted:!1,editUrl:"https://github.com/Akber261986/humanoid_robotic_book/edit/main/docs/module2/examples/ros2_gazebo_setup.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"NVIDIA Isaac Sim Introduction",permalink:"/humanoid_robotic_book/docs/module2/isaac_sim_intro"},next:{title:"NVIDIA Isaac Sim Setup Example",permalink:"/humanoid_robotic_book/docs/module2/examples/isaac_sim_setup"}},a={},c=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Create a ROS 2 Package",id:"step-1-create-a-ros-2-package",level:2},{value:"Step 2: Create Robot URDF",id:"step-2-create-robot-urdf",level:2},{value:"Step 3: Create a Simple World File",id:"step-3-create-a-simple-world-file",level:2},{value:"Step 4: Create Launch File",id:"step-4-create-launch-file",level:2},{value:"Step 5: Build and Run",id:"step-5-build-and-run",level:2},{value:"Step 6: Control the Robot",id:"step-6-control-the-robot",level:2},{value:"Verification Steps",id:"verification-steps",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues:",id:"common-issues",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"ros-2--gazebo-setup-example",children:"ROS 2 + Gazebo Setup Example"}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.p,{children:"This example demonstrates how to set up a basic simulation environment with ROS 2 and Gazebo for a simple robot. This will serve as a foundation for more complex humanoid robot simulations."}),"\n",(0,o.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsx)(n.p,{children:"Before starting, ensure you have:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"ROS 2 Humble Hawksbill installed"}),"\n",(0,o.jsx)(n.li,{children:"Gazebo Garden installed"}),"\n",(0,o.jsx)(n.li,{children:"Basic understanding of ROS 2 concepts (nodes, topics, packages)"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"step-1-create-a-ros-2-package",children:"Step 1: Create a ROS 2 Package"}),"\n",(0,o.jsx)(n.p,{children:"First, let's create a ROS 2 package for our simulation:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Navigate to your ROS 2 workspace\ncd ~/ros2_ws/src\n\n# Create the package\nros2 pkg create --build-type ament_python my_robot_simulation --dependencies rclpy std_msgs sensor_msgs geometry_msgs\n\n# Create necessary directories\nmkdir -p ~/ros2_ws/src/my_robot_simulation/launch\nmkdir -p ~/ros2_ws/src/my_robot_simulation/config\nmkdir -p ~/ros2_ws/src/my_robot_simulation/worlds\n"})}),"\n",(0,o.jsx)(n.h2,{id:"step-2-create-robot-urdf",children:"Step 2: Create Robot URDF"}),"\n",(0,o.jsxs)(n.p,{children:["Create a simple robot description in URDF format. Create the file ",(0,o.jsx)(n.code,{children:"~/ros2_ws/src/my_robot_simulation/urdf/my_robot.urdf"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="my_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">\n  \x3c!-- Base Link --\x3e\n  <link name="base_link">\n    <visual>\n      <geometry>\n        <cylinder length="0.2" radius="0.2"/>\n      </geometry>\n      <material name="blue">\n        <color rgba="0 0 1 0.8"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.2" radius="0.2"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="1.0"/>\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Gazebo Material --\x3e\n  <gazebo reference="base_link">\n    <material>Gazebo/Blue</material>\n  </gazebo>\n\n  \x3c!-- Wheel Links --\x3e\n  <link name="wheel_left">\n    <visual>\n      <geometry>\n        <cylinder length="0.05" radius="0.1"/>\n      </geometry>\n      <material name="black">\n        <color rgba="0 0 0 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.05" radius="0.1"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="0.2"/>\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>\n    </inertial>\n  </link>\n\n  <link name="wheel_right">\n    <visual>\n      <geometry>\n        <cylinder length="0.05" radius="0.1"/>\n      </geometry>\n      <material name="black">\n        <color rgba="0 0 0 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.05" radius="0.1"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="0.2"/>\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Joints --\x3e\n  <joint name="wheel_left_joint" type="continuous">\n    <parent link="base_link"/>\n    <child link="wheel_left"/>\n    <origin xyz="0 0.15 -0.05" rpy="1.57075 0 0"/>\n    <axis xyz="0 0 1"/>\n  </joint>\n\n  <joint name="wheel_right_joint" type="continuous">\n    <parent link="base_link"/>\n    <child link="wheel_right"/>\n    <origin xyz="0 -0.15 -0.05" rpy="1.57075 0 0"/>\n    <axis xyz="0 0 1"/>\n  </joint>\n\n  \x3c!-- Gazebo Plugins --\x3e\n  <gazebo>\n    <plugin name="diff_drive" filename="libgazebo_ros_diff_drive.so">\n      <left_joint>wheel_left_joint</left_joint>\n      <right_joint>wheel_right_joint</right_joint>\n      <wheel_separation>0.3</wheel_separation>\n      <wheel_diameter>0.2</wheel_diameter>\n      <max_wheel_torque>20</max_wheel_torque>\n      <max_wheel_acceleration>1.0</max_wheel_acceleration>\n      <command_topic>cmd_vel</command_topic>\n      <publish_odom>true</publish_odom>\n      <publish_odom_tf>true</publish_odom_tf>\n      <publish_wheel_tf>true</publish_wheel_tf>\n      <odometry_frame>odom</odometry_frame>\n      <robot_base_frame>base_link</robot_base_frame>\n    </plugin>\n  </gazebo>\n</robot>\n'})}),"\n",(0,o.jsx)(n.h2,{id:"step-3-create-a-simple-world-file",children:"Step 3: Create a Simple World File"}),"\n",(0,o.jsxs)(n.p,{children:["Create a basic world file at ",(0,o.jsx)(n.code,{children:"~/ros2_ws/src/my_robot_simulation/worlds/simple_room.sdf"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n<sdf version="1.7">\n  <world name="simple_room">\n    \x3c!-- Include ground plane --\x3e\n    <include>\n      <uri>model://ground_plane</uri>\n    </include>\n\n    \x3c!-- Include sun --\x3e\n    <include>\n      <uri>model://sun</uri>\n    </include>\n\n    \x3c!-- Add a simple room --\x3e\n    <model name="room">\n      <static>true</static>\n      \x3c!-- Walls will be added as links --\x3e\n      <link name="wall_1">\n        <pose>0 5 1 0 0 0</pose>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>10 0.2 2</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n          </material>\n        </visual>\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>10 0.2 2</size>\n            </box>\n          </geometry>\n        </collision>\n      </link>\n\n      <link name="wall_2">\n        <pose>5 0 1 0 0 1.5707</pose>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>10 0.2 2</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n          </material>\n        </visual>\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>10 0.2 2</size>\n            </box>\n          </geometry>\n        </collision>\n      </link>\n    </model>\n  </world>\n</sdf>\n'})}),"\n",(0,o.jsx)(n.h2,{id:"step-4-create-launch-file",children:"Step 4: Create Launch File"}),"\n",(0,o.jsxs)(n.p,{children:["Create a launch file at ",(0,o.jsx)(n.code,{children:"~/ros2_ws/src/my_robot_simulation/launch/robot_simulation.launch.py"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument, IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch.substitutions import PathJoinSubstitution, TextSubstitution\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\n\ndef generate_launch_description():\n    # Arguments\n    use_sim_time = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='true',\n        description='Use simulation (Gazebo) clock if true'\n    )\n\n    # Launch Gazebo\n    gazebo = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource([\n            PathJoinSubstitution([\n                FindPackageShare('gazebo_ros'),\n                'launch',\n                'gazebo.launch.py'\n            ])\n        ]),\n        launch_arguments={\n            'world': PathJoinSubstitution([\n                FindPackageShare('my_robot_simulation'),\n                'worlds',\n                'simple_room.sdf'\n            ]),\n            'verbose': 'false'\n        }.items()\n    )\n\n    # Robot State Publisher\n    robot_state_publisher = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        name='robot_state_publisher',\n        output='screen',\n        parameters=[{\n            'use_sim_time': True,\n            'robot_description': open(\n                PathJoinSubstitution([\n                    FindPackageShare('my_robot_simulation'),\n                    'urdf',\n                    'my_robot.urdf'\n                ]).perform(None)\n            ).read()\n        }]\n    )\n\n    # Spawn robot in Gazebo\n    spawn_entity = Node(\n        package='gazebo_ros',\n        executable='spawn_entity.py',\n        arguments=[\n            '-topic', 'robot_description',\n            '-entity', 'my_robot',\n            '-x', '0.0',\n            '-y', '0.0',\n            '-z', '0.1'\n        ],\n        output='screen'\n    )\n\n    # RViz2 for visualization (optional)\n    rviz = Node(\n        package='rviz2',\n        executable='rviz2',\n        name='rviz2',\n        arguments=['-d', PathJoinSubstitution([\n            FindPackageShare('my_robot_simulation'),\n            'config',\n            'robot_view.rviz'\n        ])],\n        parameters=[{'use_sim_time': True}],\n        output='screen'\n    )\n\n    return LaunchDescription([\n        use_sim_time,\n        gazebo,\n        robot_state_publisher,\n        spawn_entity,\n        # rviz  # Uncomment if you have RViz config\n    ])\n"})}),"\n",(0,o.jsx)(n.h2,{id:"step-5-build-and-run",children:"Step 5: Build and Run"}),"\n",(0,o.jsx)(n.p,{children:"Now build your package and run the simulation:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Navigate to your workspace\ncd ~/ros2_ws\n\n# Build the package\ncolcon build --packages-select my_robot_simulation\n\n# Source the workspace\nsource install/setup.bash\n\n# Run the simulation\nros2 launch my_robot_simulation robot_simulation.launch.py\n"})}),"\n",(0,o.jsx)(n.h2,{id:"step-6-control-the-robot",children:"Step 6: Control the Robot"}),"\n",(0,o.jsx)(n.p,{children:"In another terminal, you can send commands to control the robot:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# Make sure you source the workspace\nsource ~/ros2_ws/install/setup.bash\n\n# Send velocity commands\nros2 topic pub /cmd_vel geometry_msgs/Twist "linear:\n  x: 0.5\n  y: 0.0\n  z: 0.0\nangular:\n  x: 0.0\n  y: 0.0\n  z: 0.2"\n'})}),"\n",(0,o.jsx)(n.h2,{id:"verification-steps",children:"Verification Steps"}),"\n",(0,o.jsx)(n.p,{children:"To verify that the setup is working correctly:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Check that Gazebo launched successfully"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ros2 node list | grep gazebo\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Check that the robot model is loaded"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /joint_states --field name\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Verify the robot can move"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Observe the robot moving in the Gazebo simulation"}),"\n",(0,o.jsxs)(n.li,{children:["Check that the robot's odometry is being published:","\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /odom --field pose.pose\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Test the command interface"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Send different velocity commands and observe the robot's response"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsx)(n.h3,{id:"common-issues",children:"Common Issues:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Robot not spawning in Gazebo"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Check that the URDF file is valid"}),"\n",(0,o.jsxs)(n.li,{children:["Verify the robot description is being published: ",(0,o.jsx)(n.code,{children:"ros2 topic echo /robot_description"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"No movement when sending commands"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Check topic names match between the diff_drive plugin and your commands"}),"\n",(0,o.jsx)(n.li,{children:"Verify the joints are properly defined in the URDF"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Performance issues"}),":"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Reduce physics update rate in the world file"}),"\n",(0,o.jsx)(n.li,{children:"Simplify collision meshes in the URDF"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsx)(n.p,{children:"This basic setup provides a foundation for more complex humanoid robot simulations. You can extend this example by:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Adding more complex robot models with multiple joints and sensors"}),"\n",(0,o.jsx)(n.li,{children:"Implementing custom controllers for more sophisticated behaviors"}),"\n",(0,o.jsx)(n.li,{children:"Adding perception sensors like cameras or LiDAR"}),"\n",(0,o.jsx)(n.li,{children:"Creating more complex environments with obstacles and goals"}),"\n",(0,o.jsx)(n.li,{children:"Implementing navigation and path planning algorithms"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://gazebosim.org/docs/harmonic/ros_integration/",children:"ROS 2 Gazebo Documentation"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://github.com/ros/robot_state_publisher",children:"Robot State Publisher"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://github.com/ros-simulation/gazebo_ros_pkgs",children:"Gazebo ROS Packages"})}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"This example demonstrates the fundamental setup for ROS 2 and Gazebo integration, which is essential for humanoid robot simulation and development."})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var o=i(6540);const s={},t=o.createContext(s);function r(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);